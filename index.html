<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script src="howler.js-master/dist/howler.min.js"></script>
    <script>
      var abanibiCounter = 0;
      var abanibiFired = false;
      var secondTime = false;
      var longPress = false;
      var timebetween = 0;
      var count = null;
      var fired = false;
      var pressState = 'free';
      var sound = new Howl({
        src: ['kiss2.mp3']
      });
      document.addEventListener('keydown', (event) => {
        if(!fired) {
          abanibiCounter++;
          abanibiFired = false;
          if(abanibiCounter>10){
            console.log('abanibi');
            abanibiCounter = 0;
            pressState = 'free';
            abanibiFired = true;
          }
          fired= true;
          timebetween = 0;
          if(pressState == 'free' &! abanibiFired){
            console.log('kiss');
            secondTime = false;
          }
          if(pressState == 'press1'){
            console.log('second time');
            pressState = 'free';
            secondTime = true;      
          }
          count = setInterval(function(){
              timebetween++;
              //console.log(timebetween);
              if(timebetween > 1000 && !longPress){
                console.log('long');
                longPress = true;
              }
          }, 1);
          //sound.play();
        }
      });
      document.addEventListener('keyup', (event) => {
        abanibiFired = false;
        fired = false;
        longPress = false;
        clearInterval(count);
        if(timebetween <= 1000 && pressState=='free' &! secondTime &! abanibiFired){
          console.log('rega rega');
          pressState = 'press1';
        }
        else if(timebetween > 1000 ){
          pressState = 'free';
        }
        //console.log("final time is" +timebetween);
      });
    </script>
  </body>
</html>
